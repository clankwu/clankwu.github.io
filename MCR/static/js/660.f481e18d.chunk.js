"use strict";(self.webpackChunkmarketing_case_review=self.webpackChunkmarketing_case_review||[]).push([[660],{8660:function(t,e,s){s.r(e),s.d(e,{default:function(){return h}});var n=s(885),r=s(2791),i=s(3504),o=s(6871),c=s(1413),l=s(7806),a=s(184);function u(t){return(0,a.jsx)("div",(0,c.Z)((0,c.Z)({className:l.Z.item},t),{},{style:{background:"url(".concat(t.thumb_url,") no-repeat"),backgroundSize:"cover"},children:(0,a.jsxs)("div",{className:l.Z.circ,children:[(0,a.jsx)("div",{children:"\u5f53\u524d\u5206\u6570"}),(0,a.jsxs)("div",{children:[t.children||"\u672a\u8bc4","\u5206"]})]})}))}var d=s(9031),f=s(3940),h=function(){var t=(0,r.useState)({fingerprint:"",list:[],score:[],status:0}),e=(0,n.Z)(t,2),s=e[0],c=e[1],h=(0,o.s0)();(0,r.useEffect)((function(){var t=JSON.parse(localStorage.getItem("state")),e=t||s,n=e.fingerprint,r=e.list,i=e.score;if(n&&r&&i)c(t);else{var o=[];o.push(f.ZP.load().then((function(t){return t.get()}))),o.push(fetch("./list.json").then((function(t){return t.json()}))),o.push(fetch("./score.json").then((function(t){return t.json()}))),Promise.all(o).then((function(t){var e={fingerprint:t[0].visitorId,list:t[1],score:t[2].score,status:0};if(0===t[2].score.length){for(var s=t[1].length;s--;)t[2].score.push([0,0,0,0]);e.status=0}else e.status=2;c(e),localStorage.setItem("state",JSON.stringify(e))}))}}),[]);return(0,a.jsxs)("div",{className:l.Z.list,children:[(0,a.jsx)("img",{src:d,className:l.Z.logo,alt:"top"}),(0,a.jsxs)("div",{className:l.Z.listcontainer,children:[s.list.map((function(t,e){var n;return(0,a.jsx)(u,{className:l.Z.item,onClick:function(){var t;t=e,h("/detail",{state:{detail:s.list[t],score:s.score[t],status:s.status}}),window.scrollTo({left:0,top:0,behavior:"smooth"})},thumb_url:t.thumb_url,children:null===(n=s.score[e])||void 0===n?void 0:n.reduce((function(t,e){return t+e}),0)},e)})),(0,a.jsx)("div",{style:{display:s.list.length?"block":"none"},className:l.Z.tip,children:"\u8bf7\u6309\u987a\u5e8f\u8bc4\u5206"}),(0,a.jsx)(i.rU,{id:"complete",style:{display:s.list.length?"block":"none"},className:[l.Z.button,2===s.status?l.Z.disabled:""].join(" "),to:"/",onClick:function(t){if(0===s.status){var e=s.score.findIndex((function(t){return 0===t.reduce((function(t,e){return t+e}))}));h("/detail",{state:{detail:s.list[e],score:s.score[e],status:s.status}}),window.scrollTo({left:0,top:0,behavior:"smooth"})}else 1===s.status&&window.confirm("\u662f\u5426\u63d0\u4ea4\u60a8\u7684\u8bc4\u5206\uff1f")&&fetch("./score.json").then((function(t){return t.json()})).then((function(t){console.log(t);var e={fingerprint:s.fingerprint,list:s.list,score:s.score,status:2};c(e),localStorage.setItem("state",JSON.stringify(e))}));t.preventDefault()},children:["\u7ee7\u7eed\u8bc4\u5206","\u63d0\u4ea4\u8bc4\u4ef7","\u5df2\u63d0\u4ea4"][s.status]})]})]})}},9031:function(t,e,s){t.exports=s.p+"static/media/list_top.0758d3e6e1c502224578.png"}}]);
//# sourceMappingURL=660.f481e18d.chunk.js.map